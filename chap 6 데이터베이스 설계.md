# chap 6 : 데이터베이스 설계

## **01. 데이터베이스 설계**

### ****1-1 데이터베이스 설계 단계****

***데이터베이스 설계 database design***

- ***사용자의 요구사항으로부터 실세계를 반영한 데이터페이스의 구조를 도출해 내는 과정***
- 어떠한 필드로 구성된 테이블을 어떠한 물리적 형태의 데이터베이스로 저장할 것인가를 결정
- 데이터베이스 설계 단계
    - ***요구사항 분석***
        - DB 사용환경 분석 후 대상 및 제한 조건 등을 도출하는 단계
    - ***개념적 설계 conceptual design***
        - 요구사항 분석에서 나온 결과를 추상화된 표현 방식으로 기술하는 단계
        - 개념적 스키마를 생성
        - 인간이 이해하기 쉽다
    - ***논리적 설계 logical design***
        - 논리적 데이터베이스 구조에 맞는 스키마를 생성하는 단계
        - 테이블 스키마 생성
    - ***물리적 설계***
        - 실제 컴퓨터에 저장되는 방식 설계
        - 성능과 연관이 깊다

### ****1-2 개념적, 논리적, 물리적 설계****

- ***개념적 설계***
    
    시간이 오래 걸림
    
    - 사용자의 요구사항 분석 후, 추상적인 형태로 설계
        - 사용자가 이해하기 쉬운 형태로 표현
    - 개념적 모델을 이용하여 ***개념적 스키마 conceptual shcema***를 생성
    - 대표적 개념적 모델
        - ex) ***개체관계 모델 entity relationship model 또는 ER model***
    - 개념적 스키마
        - 데이터베이스에 대한 추상적인 설계도
        - ***개체관계 다이어그램 entity relationship diagram***
            - 개체관계 모델의 표현 수단
            - ***ER shcema***
- ***논리적 설계***
    - 논리적 모델 (관계형 데이터 모델) 이용 논리적 스키마 생성
        - ER shcema를 이용하여 database schema를 생성
    - 논리적 스키마
        - ***테이블 스키마 relational shcema, 데이터베이스 스키마 database schema***
        - 테이블 구조도
        - 개념적 설계 단계에서 생성된 ERD를 바탕으로 생성되는 테이블
- ***물리적 설계***
    - 물리적 구조에 따라 테이블 저장 구조를 결정
    - ***물리적 스키마 physical shcema***
        - 실제적인 저장 구조
    - 테이블 저장 구조란?
        - 필드의 데이터 타입
        - 인덱스 지정 여부
        - 물리적 스키마
    - 단순 물리적 설계 과정
        - SQL create table문을 이용하여 테이블 생성
    - 추가 고려 사항
        - 인덱스, 뷰 설정
        - 성능

***데이터베이스 설계 단계에 있어 개념적 설계, 개념적 스키마가 가장 중요하다.***

### ****1-3 설계 과정의 고려사항****

- ***충실성 faithfulness***
    - 필요로 하는 모든 정보를 표현
- ***단순성 simplicity***
    - 단순하고 이해하기 쉬운 구조로 표현
- ***중복의 최소화 redundancy minimization***
    - 데이터의 중복을 최소화
    - 저장공간의 효율적 사용, 데이터 일관성 유지
- ***제약조건 constraints의 표현***
    - 데이터가 갖추어야 할 조건을 표현

## **02. 개체관계 모델 : 개념적 설계**

### ****2-1 개체집합과 속성****

- ***개체 entity***
    - 현실 세계에서 물리적 혹은 추상적으로 존재하는 실체
- ***개체집합 entity set***
    - 동일한 특성을 갖는 개체들의 집합
- ***속성 attribute***
    - 개체의 특성
    - 관계형 데이터 모델의 필드와 같은 개념
    - 통일한 특성을 갖는 개체 = 속성이 동일한 개체
- 필드와 속성의 차이점
    - 필드 - 관계형 데이터 모델
        - 원자적인 값만 허용
    - 속성 - 개체관계 모델
        - ***다중값 속성***
            - 하나의 속성에 여러 개의 값이 들어감
            - ex) family_member 속성에는 가족이름 여러 명이 포함
        - ***복합 속성***
            - 하나의 속성이 여러 개의 속성으로 구성됨
            - ex) address 속성은 세부적으로 (district, city, street)로 구성됨

### ****2-2 관계집합****

- ***관계 relationship***
    - ***개체 간의 대응성***
    - 개체간의 관계를 통해 의미를 규정할 수 있음
        - ex) 개체 ‘김광식’은 개체 ‘컴퓨터공학과’에 소속(affiliated)된다. => 순서쌍 (‘김광식’, ‘컴퓨터공학과’)으로 표현
- 관계집합 relationship set (p267~268 그림 참조)
    - 동일한 유형의 관계들의 집합
    - 관계집합에도 속성의 정의가 가능 (그림 6-5)
- 관계집합의 차수 degree
    - 관계집합에 참여하는 개체집합의 개수
    - ***이진 관계 binary relationship***
        - 두 개체집합 사이에 정의된 관계집합
        - 차수는 2
        - 학생 – 학과의 소속관계
            - 학생 ‘김광식’은 학과 ‘컴퓨터공학과’ 소속
    - ***삼진 관계 ternary relationship***
        - 세 개체집합 사이에 정의된 관계집합
        - 차수는 3
        - 학생-과목-교수의 강의/수강 관계
            - 학생 ‘김광식’은 교수 ‘최성희’가 강의하는 과목 ‘전산개론’ 을 수강
- ***관계의 대응수 mapping cardinality*** (p269~272)
    - 관계집합에서 각 개체들이 참여할 수 있는 대응의 개수
    - 대응수의 종류
        - one to one
        - one to many
        - many to one
        - many to many
    - 대응관계 유형은 ER schema에서 table schema로 변환 시 활용

### ****2-3 악성 개체집합과 강성 개체집합****

- ***강성 개체집합 strong entity set***
    - 기본키 형성에 필요한 속성을 모두 갖는 개체집합
- ***약성 개체집합 weak entity set***
    - 기본키 형성에 필요한 속성을 모두 갖지 못하는 개체집합
- ***약성 개체집합은 강성 개체집합에 항상 종속 → 약성 개체집합의 존재가 강성 개체집합의 존재에 의해 결정됨***
- 약성 개체집합과 강성 개체집합의 대응수 : ***many to one***
    - ***전체 참여 total participation***
        - 약성 개체집합의 모든 개체가 다대일 관계에 참여
    - ***부분 참여 partial participation***
        - 약성 개체집합의 일부 개체만 다대일 관계에 참여
- 약성 개체집합을 판별하는 가장 쉬운 방법
    - 이 개체집합이 의존하는 강성 개체집합이 존재하는가를 확인
- ***부분키 partial key, 구별자 discriminator***
    - 약성 개체집합에서 강성 개체집합의 특정 개체 내에서 유일한 값을 갖는 속성 집합
- 약성 개체집합은 그 자체로 기본키를 갖지 못하므로 종속 관계에 있는 강성 개체집합의 도움을 받아야 한다.
    - 즉, 약성 개체집합의 기본키는 자신의 부분키와 강성 개체집합의 기본키로 구성

### 2-4 일반화 관계

- 상위 개체집합 high level entity set, 수퍼클래스 개체집합 superclass entity set
    - 일반적 개념을 가지는 개체집합
- 하위 개체집합 low-level entity set, 서브클래스 개체집합 subclass entity set
    - 구체적 개념을 가지는 개체집합
- 세분화 specialization
    - 상위 개체집합을 여러개의 하위 개체집합으로 분류
- ***일반화 generalization***
    - 하위 개체집합의 공통적인 특징을 모아 상위 개체집합 생성

## 03 개체관계 다이어그램

### 3-1 구성요소 p276~279

![Untitled](Untitled.png)

- 자기연관 관계 self-relationship
    - 하나의 개체집합이 자신과 연관 관계를 맺는 것
- 역할 role
    - 각 역할에 따라 대응수가 다름

### 3-2 ER 스키마의 설계 p279~283

- 개체집합들을 모두 결정하고 그들의 관계를 그 다음으로 결정하는 순으로 설계
- 요구사항에서 가장 중요하다고 판단되는 개체집합과 관계집합을 우선 결정하고 그들로부터 점점 확대하여 추가적인 개체집합과 관계집합을 이끌어내는 순으로 설계
- 전적으로 설계자의 판단에 의해 결정됨

## 04 ER 스키마로부터 테이블 스키마로의 변환 : 논리적 설계 p284~296

### 4-1 강성 개체집합의 변환

- 강성 개체집합 → 하나의 테이블
- 속성 → 테이블 필드
- 기본키 → 테이블 기본키

### 4-2 약성 개체집합의 변환

- 그 자체로는 존재 의미가 없고 의존 관계에 있는 강성 개체와의 연관을 통해 표현
- 약성 개체집합의 기본키는 복합키로 구성
    - 강성 기본키 + 약성 부분키

### 4-3 관계집합의 변환

- 생성된 테이블의 기본키는 관련된 각 개체집합의 기본키에 해당하는 모든 필드들로 구성

### 4-4 자기연관 관계집합의 변환

### 4-5 테이블의 중복과 결합

- 중복이 발생한 테이블은 다른 테이블과 결합되어 하나의 테이블로 표기
    - 약성과 강성 사이의 관계집합 테이블은 생략 가능
- many to one 관계에서 관계집합 테이블을 many 테이블과 결합
- many to many 관계에서 결합 불가능
- one to one
    - ex) 관계집합 테이블 R, 개체집합 S, T
    - S와 R / T와 R / S에 R,T

### 4-6 다중값 속성의 변환

- 관계형 테이블의 속성은 원자값만 허용
- 다중값 속성은 새로운 테이블로 독립

### 4-7 복합 속성의 변환

- 각 세부 속성을 하나의 필드로 정의 → 복합 속성은 여러개의 속성으로 분리

### 4-8 일반화 관계의 변환

- 상위 개체집합을 유지
    - 상위 개체집합에 존재하는 일부 개체가 하위 개체집합에 속하지 않는 경우(부분 참여)에 유용하게 활용 가능
    - 상/하위 개체집합에 해당하는 테이블에 대한 조인 연산이 수반되는 질의가 자주 발생할 수 있다는 단점
- 상위 개체집합을 삭제
    - 상위 개체집합에 존재하는 모든 개체가 하위 개체집합에 속하는 경우(전체 참여)에만 활용 가능
    - 공통 필드에 대한 UNION 연산 자주 발생 가능

### 4-9 최종 테이블 스키마

- ER Win : 데이터베이스 설계과정을 도와주는 SW
    - ERD 그리는 것 지원 가능